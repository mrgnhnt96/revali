---
sidebar_position: 3
---

# Construct Config

Now that we have created the entrypoint for our construct, we need a way to tell Revali where to find the entrypoint and how to generate the code. This is done by creating a `construct.yaml` file in the root of your project.

## Create `construct.yaml`

Create a new file in the root of your project called `construct.yaml`. This file will contain the configuration for your construct.

```yaml title="./construct.yaml"
constructs:
    - name: my_construct
      path: my_construct_entrypoint.dart
      method: myConstructEntrypoint
```

:::tip
You can have multiple constructs in a single project. Each construct should be defined in the `constructs` list.
:::

## Yaml Structure

### Required Properties

The `construct.yaml` file contains a list of constructs that you want to generate. Each construct should have the following properties:

- `name`: The name of the construct. This is used by Revali to identify the construct. If there other constructs that match the same name, Revali will use the `name` from the `pubspec.yaml` to further identify the construct.
    :::important
      The `name` property should be unique across all constructs in your project.
    :::
- `path`: The path to the entrypoint file for the construct. This should be a relative path from the `lib` directory of your project.

    ```tree
    .
    ├── lib
    │   ├── my_construct_entrypoint.dart
    │   └── ...
    ├── construct.yaml
    └── pubspec.yaml
    ```

- `method`: The name of the function in the entrypoint file that returns the `Construct` object.

    ```dart title="lib/my_construct_entrypoint.dart"
    import 'package:revali_construct/revali_construct.dart';

    // highlight-next-line
    Construct myConstructEntrypoint([ConstructOptions? options]) {
        ...
    }
    ```

### Optional Properties

### `is_server`

A boolean value that indicates whether the construct is generating the server code. The code generated by this construct will be placed within the `.revali/server` directory.

::::important
There's only one construct that can have the `is_server` property set to `true` with a revali project.
:::tip
Read more about [Server Constructs][server-constructs].
:::
::::

#### Server Construct

When `is_server` is set to `true`, you will need to return a `ServerConstruct` object instead of the general `Construct` object.

```dart title="lib/my_construct_entrypoint.dart"
import 'package:revali_construct/revali_construct.dart';

// highlight-next-line
ServerConstruct myConstructEntrypoint([ConstructOptions? options]) {
    ...
}
```

### `is_build`

A boolean value that indicates whether the construct is generating the build code. The code generated by this construct will be placed within the `.revali/build` directory.

::::note
You can have multiple constructs with the `is_build` property set to `true`.
:::tip
Read more about [Build Constructs][build-constructs].
:::
::::

#### Build Construct

When `is_build` is set to `true`, you will need to return a `BuildConstruct` object instead of the general `Construct` object.

```dart title="lib/my_construct_entrypoint.dart"
import 'package:revali_construct/revali_construct.dart';

// highlight-next-line
BuildConstruct myConstructEntrypoint([ConstructOptions? options]) {
    ...
}
```

### `opt_in`

A boolean value that indicates whether the Construct is disabled by default and requires the user to opt-in to use it. This is useful when you have a Construct that is not commonly used, is experimental, or conflicting with other Constructs.

```yaml title="./construct.yaml"
constructs:
    - name: my_construct
      ...
      # highlight-next-line
      opt_in: true
```

[server-constructs]: ../../constructs/overview.md#server-constructs
[build-constructs]: ../../constructs/overview.md#build-constructs
